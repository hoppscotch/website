import{g as f,q as _,P as F,H as c,d as k,G as X,v as Y,o as q,c as L,e as $}from"./app-C2umV3j_.js";function H(){const m=f({x:0,y:0}),v=n=>{m.value={x:n.clientX,y:n.clientY}};let i=null;_(()=>{i=F(document,"mousemove",v)});const s=()=>{i&&(i(),i=null)};return c(()=>{s()}),m}const V=k({__name:"Particles",props:{quantity:{type:Number,default:25},staticity:{type:Number,default:50},ease:{type:Number,default:50},refresh:{type:Boolean,default:!1}},setup(m){const v=m,i=f(),s=f(null),n=f(null),p=X({x:0,y:0}),a=X({w:0,h:0}),h=window.devicePixelRatio||1,y=f([]),w=H(),b=()=>{if(n.value){const e=n.value.getBoundingClientRect(),{w:t,h:o}=a,u=w.value.x-e.left-t/2,l=w.value.y-e.top-o/2;u<t/2&&u>-t/2&&l<o/2&&l>-o/2&&(p.x=u,p.y=l)}},E=()=>{i.value&&n.value&&s.value&&(y.value.length=0,a.w=i.value.offsetWidth,a.h=i.value.offsetHeight,n.value.width=a.w*h,n.value.height=a.h*h,n.value.style.width=`${a.w}px`,n.value.style.height=`${a.h}px`,s.value.scale(h,h))},z=()=>{const e=Math.floor(Math.random()*a.w),t=Math.floor(Math.random()*a.h),o=0,u=0,l=Math.floor(Math.random()*2)+.5,r=0,d=Number.parseFloat((Math.random()*.6+.1).toFixed(1)),M=(Math.random()-.5)*.2,N=(Math.random()-.5)*.2,A=.1+Math.random()*4;return{x:e,y:t,translateX:o,translateY:u,size:l,alpha:r,targetAlpha:d,dx:M,dy:N,magnetism:A}},g=(e,t=!1)=>{if(s.value){const{x:o,y:u,translateX:l,translateY:r,size:d,alpha:M}=e;s.value.translate(l,r),s.value.beginPath(),s.value.arc(o,u,d,0,2*Math.PI),s.value.fillStyle=`rgba(255, 255, 255, ${M})`,s.value.fill(),s.value.setTransform(h,0,0,h,0,0),t||y.value.push(e)}},C=()=>{s.value&&s.value.clearRect(0,0,a.w,a.h)},R=()=>{C();const e=v.quantity;for(let t=0;t<e;t++){const o=z();g(o)}},B=(e,t,o,u,l)=>{const r=(e-t)*(l-u)/(o-t)+u;return r>0?r:0},P=()=>{C(),y.value.forEach((e,t)=>{const u=[e.x+e.translateX-e.size,a.w-e.x-e.translateX-e.size,e.y+e.translateY-e.size,a.h-e.y-e.translateY-e.size].reduce((r,d)=>Math.min(r,d)),l=Number.parseFloat(B(u,0,20,0,1).toFixed(2));if(l>1?(e.alpha+=.02,e.alpha>e.targetAlpha&&(e.alpha=e.targetAlpha)):e.alpha=e.targetAlpha*l,e.x+=e.dx,e.y+=e.dy,e.translateX+=(p.x/(v.staticity/e.magnetism)-e.translateX)/v.ease,e.translateY+=(p.y/(v.staticity/e.magnetism)-e.translateY)/v.ease,e.x<-e.size||e.x>a.w+e.size||e.y<-e.size||e.y>a.h+e.size){y.value.splice(t,1);const r=z();g(r)}else g({...e,x:e.x,y:e.y,translateX:e.translateX,translateY:e.translateY,alpha:e.alpha},!0)}),window.requestAnimationFrame(P)};_(()=>{n.value&&(s.value=n.value.getContext("2d")),x(),P(),window.addEventListener("resize",x)}),c(()=>{window.removeEventListener("resize",x)}),Y(()=>w.value,()=>{b()}),Y(()=>v.refresh,()=>{x()});const x=()=>{E(),R()};return(e,t)=>(q(),L("div",{ref_key:"canvasContainerRef",ref:i,"aria-hidden":"true"},[$("canvas",{ref_key:"canvasRef",ref:n},null,512)],512))}});export{V as _,H as u};
