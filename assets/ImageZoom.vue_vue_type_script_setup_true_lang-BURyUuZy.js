import{d as de,v as me,o as le,c as ce}from"./app-Cftb-xXP.js";/*! medium-zoom 1.1.0 | MIT License | https://github.com/francoischalifour/medium-zoom */var w=Object.assign||function(u){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var m in a)Object.prototype.hasOwnProperty.call(a,m)&&(u[m]=a[m])}return u},I=function(t){return t.tagName==="IMG"},ue=function(t){return NodeList.prototype.isPrototypeOf(t)},N=function(t){return t&&t.nodeType===1},R=function(t){var a=t.currentSrc||t.src;return a.substr(-4).toLowerCase()===".svg"},U=function(t){try{return Array.isArray(t)?t.filter(I):ue(t)?[].slice.call(t).filter(I):N(t)?[t].filter(I):typeof t=="string"?[].slice.call(document.querySelectorAll(t)).filter(I):[]}catch{throw new TypeError(`The provided selector is invalid.
Expects a CSS selector, a Node element, a NodeList or an array.
See: https://github.com/francoischalifour/medium-zoom`)}},se=function(t){var a=document.createElement("div");return a.classList.add("medium-zoom-overlay"),a.style.background=t,a},fe=function(t){var a=t.getBoundingClientRect(),m=a.top,s=a.left,y=a.width,E=a.height,p=t.cloneNode(),_=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,S=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0;return p.removeAttribute("id"),p.style.position="absolute",p.style.top=m+_+"px",p.style.left=s+S+"px",p.style.width=y+"px",p.style.height=E+"px",p.style.transform="",p},C=function(t,a){var m=w({bubbles:!1,cancelable:!1,detail:void 0},a);if(typeof window.CustomEvent=="function")return new CustomEvent(t,m);var s=document.createEvent("CustomEvent");return s.initCustomEvent(t,m.bubbles,m.cancelable,m.detail),s},ge=function u(t){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},m=window.Promise||function(o){function n(){}o(n,n)},s=function(o){var n=o.target;if(n===T){z();return}v.indexOf(n)!==-1&&B({target:n})},y=function(){if(!(L||!e.original)){var o=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0;Math.abs(q-o)>i.scrollOffset&&setTimeout(z,150)}},E=function(o){var n=o.key||o.keyCode;(n==="Escape"||n==="Esc"||n===27)&&z()},p=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=o;if(o.background&&(T.style.background=o.background),o.container&&o.container instanceof Object&&(n.container=w({},i.container,o.container)),o.template){var d=N(o.template)?o.template:document.querySelector(o.template);n.template=d}return i=w({},i,n),v.forEach(function(l){l.dispatchEvent(C("medium-zoom:update",{detail:{zoom:c}}))}),c},_=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return u(w({},i,o))},S=function(){for(var o=arguments.length,n=Array(o),d=0;d<o;d++)n[d]=arguments[d];var l=n.reduce(function(r,g){return[].concat(r,U(g))},[]);return l.filter(function(r){return v.indexOf(r)===-1}).forEach(function(r){v.push(r),r.classList.add("medium-zoom-image")}),x.forEach(function(r){var g=r.type,h=r.listener,H=r.options;l.forEach(function(b){b.addEventListener(g,h,H)})}),c},W=function(){for(var o=arguments.length,n=Array(o),d=0;d<o;d++)n[d]=arguments[d];e.zoomed&&z();var l=n.length>0?n.reduce(function(r,g){return[].concat(r,U(g))},[]):v;return l.forEach(function(r){r.classList.remove("medium-zoom-image"),r.dispatchEvent(C("medium-zoom:detach",{detail:{zoom:c}}))}),v=v.filter(function(r){return l.indexOf(r)===-1}),c},F=function(o,n){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return v.forEach(function(l){l.addEventListener("medium-zoom:"+o,n,d)}),x.push({type:"medium-zoom:"+o,listener:n,options:d}),c},X=function(o,n){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return v.forEach(function(l){l.removeEventListener("medium-zoom:"+o,n,d)}),x=x.filter(function(l){return!(l.type==="medium-zoom:"+o&&l.listener.toString()===n.toString())}),c},Z=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=o.target,d=function(){var r={width:document.documentElement.clientWidth,height:document.documentElement.clientHeight,left:0,top:0,right:0,bottom:0},g=void 0,h=void 0;if(i.container)if(i.container instanceof Object)r=w({},r,i.container),g=r.width-r.left-r.right-i.margin*2,h=r.height-r.top-r.bottom-i.margin*2;else{var H=N(i.container)?i.container:document.querySelector(i.container),b=H.getBoundingClientRect(),k=b.width,J=b.height,Q=b.left,V=b.top;r=w({},r,{width:k,height:J,left:Q,top:V})}g=g||r.width-i.margin*2,h=h||r.height-i.margin*2;var O=e.zoomedHd||e.original,$=R(O)?g:O.naturalWidth||g,ee=R(O)?h:O.naturalHeight||h,A=O.getBoundingClientRect(),te=A.top,oe=A.left,j=A.width,M=A.height,ne=Math.min(Math.max(j,$),g)/j,re=Math.min(Math.max(M,ee),h)/M,P=Math.min(ne,re),ie=(-oe+(g-j)/2+i.margin+r.left)/P,ae=(-te+(h-M)/2+i.margin+r.top)/P,Y="scale("+P+") translate3d("+ie+"px, "+ae+"px, 0)";e.zoomed.style.transform=Y,e.zoomedHd&&(e.zoomedHd.style.transform=Y)};return new m(function(l){if(n&&v.indexOf(n)===-1){l(c);return}var r=function k(){L=!1,e.zoomed.removeEventListener("transitionend",k),e.original.dispatchEvent(C("medium-zoom:opened",{detail:{zoom:c}})),l(c)};if(e.zoomed){l(c);return}if(n)e.original=n;else if(v.length>0){var g=v;e.original=g[0]}else{l(c);return}if(e.original.dispatchEvent(C("medium-zoom:open",{detail:{zoom:c}})),q=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,L=!0,e.zoomed=fe(e.original),document.body.appendChild(T),i.template){var h=N(i.template)?i.template:document.querySelector(i.template);e.template=document.createElement("div"),e.template.appendChild(h.content.cloneNode(!0)),document.body.appendChild(e.template)}if(e.original.parentElement&&e.original.parentElement.tagName==="PICTURE"&&e.original.currentSrc&&(e.zoomed.src=e.original.currentSrc),document.body.appendChild(e.zoomed),window.requestAnimationFrame(function(){document.body.classList.add("medium-zoom--opened")}),e.original.classList.add("medium-zoom-image--hidden"),e.zoomed.classList.add("medium-zoom-image--opened"),e.zoomed.addEventListener("click",z),e.zoomed.addEventListener("transitionend",r),e.original.getAttribute("data-zoom-src")){e.zoomedHd=e.zoomed.cloneNode(),e.zoomedHd.removeAttribute("srcset"),e.zoomedHd.removeAttribute("sizes"),e.zoomedHd.removeAttribute("loading"),e.zoomedHd.src=e.zoomed.getAttribute("data-zoom-src"),e.zoomedHd.onerror=function(){clearInterval(H),console.warn("Unable to reach the zoom image target "+e.zoomedHd.src),e.zoomedHd=null,d()};var H=setInterval(function(){e.zoomedHd.complete&&(clearInterval(H),e.zoomedHd.classList.add("medium-zoom-image--opened"),e.zoomedHd.addEventListener("click",z),document.body.appendChild(e.zoomedHd),d())},10)}else if(e.original.hasAttribute("srcset")){e.zoomedHd=e.zoomed.cloneNode(),e.zoomedHd.removeAttribute("sizes"),e.zoomedHd.removeAttribute("loading");var b=e.zoomedHd.addEventListener("load",function(){e.zoomedHd.removeEventListener("load",b),e.zoomedHd.classList.add("medium-zoom-image--opened"),e.zoomedHd.addEventListener("click",z),document.body.appendChild(e.zoomedHd),d()})}else d()})},z=function(){return new m(function(o){if(L||!e.original){o(c);return}var n=function d(){e.original.classList.remove("medium-zoom-image--hidden"),document.body.removeChild(e.zoomed),e.zoomedHd&&document.body.removeChild(e.zoomedHd),document.body.removeChild(T),e.zoomed.classList.remove("medium-zoom-image--opened"),e.template&&document.body.removeChild(e.template),L=!1,e.zoomed.removeEventListener("transitionend",d),e.original.dispatchEvent(C("medium-zoom:closed",{detail:{zoom:c}})),e.original=null,e.zoomed=null,e.zoomedHd=null,e.template=null,o(c)};L=!0,document.body.classList.remove("medium-zoom--opened"),e.zoomed.style.transform="",e.zoomedHd&&(e.zoomedHd.style.transform=""),e.template&&(e.template.style.transition="opacity 150ms",e.template.style.opacity=0),e.original.dispatchEvent(C("medium-zoom:close",{detail:{zoom:c}})),e.zoomed.addEventListener("transitionend",n)})},B=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=o.target;return e.original?z():Z({target:n})},K=function(){return i},D=function(){return v},G=function(){return e.original},v=[],x=[],L=!1,q=0,i=a,e={original:null,zoomed:null,zoomedHd:null,template:null};Object.prototype.toString.call(t)==="[object Object]"?i=t:(t||typeof t=="string")&&S(t),i=w({margin:0,background:"#fff",scrollOffset:40,container:null,template:null},i);var T=se(i.background);document.addEventListener("click",s),document.addEventListener("keyup",E),document.addEventListener("scroll",y),window.addEventListener("resize",z);var c={open:Z,close:z,toggle:B,update:p,clone:_,attach:S,detach:W,on:F,off:X,getOptions:K,getImages:D,getZoomedImage:G};return c};function pe(u,t){t===void 0&&(t={});var a=t.insertAt;if(!(typeof document>"u")){var m=document.head||document.getElementsByTagName("head")[0],s=document.createElement("style");s.type="text/css",a==="top"&&m.firstChild?m.insertBefore(s,m.firstChild):m.appendChild(s),s.styleSheet?s.styleSheet.cssText=u:s.appendChild(document.createTextNode(u))}}var ve=".medium-zoom-overlay{position:fixed;top:0;right:0;bottom:0;left:0;opacity:0;transition:opacity .3s;will-change:opacity}.medium-zoom--opened .medium-zoom-overlay{cursor:pointer;cursor:zoom-out;opacity:1}.medium-zoom-image{cursor:pointer;cursor:zoom-in;transition:transform .3s cubic-bezier(.2,0,.2,1)!important}.medium-zoom-image--hidden{visibility:hidden}.medium-zoom-image--opened{position:relative;cursor:pointer;cursor:zoom-out;will-change:transform}";pe(ve);const ze=de({__name:"ImageZoom",props:{options:{default(){return{margin:16}}}},setup(u){const t=u;let a=null;const m=()=>(a===null&&(a=ge(t.options)),a),s=y=>{const E=y,p=m();E?p.attach(E):p.detach()};return me(()=>t.options,y=>{m().update(y||{})}),(y,E)=>(le(),ce("img",{ref:s,loading:"lazy"}))}});export{ze as _};
